package com.pawj.api;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.actuate.endpoint.web.annotation.RestControllerEndpoint;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.client.RestTemplate;

import com.pawj.domain.Rating;
import com.pawj.domain.User;
import com.pawj.domain.User.UserBuilder;

@RestController
public class UserController {

	@Autowired
	RestTemplate restTemplate;
	
	@GetMapping("/users")
	public User getUsers() {
		
		User user = new User.UserBuilder("Deba").setAge(34).setGender("male").build();
		getRating();
		return user;
	}
	
	public Rating getRating() {
		
		String url = "http://localhost:8084/rating";
		ResponseEntity<Rating> rs =  restTemplate.getForEntity(url,Rating.class);
		
		Rating rating =  rs.getBody();
		
		return rating;
		
		
	}
}
